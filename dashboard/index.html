<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>ACADEMY CHARLES KABORE - Dashboard Statistique et Comptabilité</title>
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <link href="https://fonts.googleapis.com" rel="preconnect" />
  <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style type="text/tailwindcss">
    :root {
            --red-500: #EF4444;
            --orange-500: #F97316;
            --gray-100: #F3F4F6;
            --gray-200: #E5E7EB;
            --gray-400: #9CA3AF;
            --gray-500: #6B7280;
            --gray-600: #4B5563;
            --gray-700: #374151;
             --gray-800: #1F2937;
            --gray-900: #111827;
            --white: #FFFFFF;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--gray-100);
        }
        .sidebar {
            background-color: var(--gray-900);
            color: var(--white);
        }
        .sidebar-link {
            color: var(--gray-400);
        }
        .sidebar-link:hover,
        .sidebar-link.active {
            background-color: var(--gray-700);
            color: var(--white);
        }
        .sidebar-link.active {
            background-color: var(--red-500);
        }
        .btn-primary {
            background-color: var(--red-500);
            color: var(--white);
        }
        .btn-primary:hover {
            background-color: #D93E3E;
        }
        .text-red {
            color: var(--red-500);
        }
        .text-orange {
            color: var(--orange-500);
        }
        .bg-red-soft {
             background-color: rgba(239, 68, 68, 0.1);
        }
        .bg-orange-soft {
             background-color: rgba(249, 115, 22, 0.1);
        }
        .bg-green-soft {
            background-color: rgba(34, 197, 94, 0.1);
        }
        .text-green-500 {
            color: #22C55E;
        }
    </style>
</head>

<body class="bg-gray-100">
  <div class="flex h-screen">
    <aside class="sidebar w-64 flex flex-col p-4 space-y-4">
      <div class="flex items-center space-x-2 pb-4 border-b border-gray-700">
        <img alt="Logo" class="h-10 w-10 rounded-full object-cover"
          src="https://lh3.googleusercontent.com/aida-public/AB6AXuBm6nUdMss5fhhNsF7qVifw2cpj4hLl91IF0SmiArO-ZKvOAcdhXyhRpHwmnWyzoj40trIPXO8J8KU_3g8vwXm2WBV-AoaYNd8stuSgh2USnye_QxGb734lNnovZkVEPoevDgHm7p5ouMA_LbEnT4PLQc5XgqBAt7UZmcczt-D2bUGHUl7GLxhL-33AYoE6i0VXlVQ-vtH0w01ynyheqrksVH9mrP_9qQI6Wqf2JLKn4Q8xpuV_ltVBhkgX9ZjA_M-GGwMApi0thf02" />
        <span class="font-bold text-xl">ACADEMY C.K.</span>
      </div>
      <nav class="flex-grow">
        <a class="sidebar-link active flex items-center p-2 rounded-lg space-x-3" href="#">
          <span class="material-symbols-outlined">dashboard</span>
          <span>Aperçu</span>
        </a>
        <a class="sidebar-link flex items-center p-2 rounded-lg space-x-3" href="pages/inscription.html">
          <span class="material-symbols-outlined">person_add</span>
          <span>Inscriptions</span>
        </a>
        <a class="sidebar-link flex items-center p-2 rounded-lg space-x-3" href="pages/liste-inscrits.html">
          <span class="material-symbols-outlined">group</span>
          <span>Liste des Inscrits</span>
        </a>
        <a class="sidebar-link flex items-center p-2 rounded-lg space-x-3" href="pages/statistiques.html">
          <span class="material-symbols-outlined">query_stats</span>
          <span>Statistiques</span>
        </a>
     
        <a class="sidebar-link flex items-center p-2 rounded-lg space-x-3" href="pages/parametres.html">
          <span class="material-symbols-outlined">settings</span>
          <span>Paramètres</span>
        </a>
      </nav>
      <div>
        <a class="sidebar-link flex items-center p-2 rounded-lg space-x-3" href="#">
          <span class="material-symbols-outlined">logout</span>
          <span>Déconnexion</span>
        </a>
      </div>
    </aside>
    <main id="main-content" class="flex-1 p-8 overflow-y-auto">
      <header class="flex justify-between items-center mb-8">
        <h1 class="text-3xl font-bold text-gray-800">Tableau de bord</h1>
        <div class="flex items-center space-x-4">
          <button class="btn-primary px-4 py-2 rounded-lg font-semibold flex items-center space-x-2">
            <span class="material-symbols-outlined">download</span>
            <span>Exporter les données</span>
          </button>

        </div>
      </header>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
        <div class="bg-white p-6 rounded-xl shadow-md flex items-center space-x-4">
          <div class="p-3 rounded-full bg-red-soft">
            <span class="material-symbols-outlined text-red text-3xl">payments</span>
          </div>
          <div>
            <p class="text-gray-500 text-sm">Revenu Total</p>
            <p class="text-2xl font-bold text-gray-800">125 750 €</p>
          </div>
        </div>
        <div class="bg-white p-6 rounded-xl shadow-md flex items-center space-x-4">
          <div class="p-3 rounded-full bg-orange-soft">
            <span class="material-symbols-outlined text-orange text-3xl">group</span>
          </div>
          <div>
            <p class="text-gray-500 text-sm">Utilisateurs Enregistrés</p>
            <p class="text-2xl font-bold text-gray-800">320</p>
          </div>
        </div>
        <div class="bg-white p-6 rounded-xl shadow-md flex items-center space-x-4">
          <div class="p-3 rounded-full bg-green-soft">
            <span class="material-symbols-outlined text-green-500 text-3xl">event_available</span>
          </div>
          <div>
            <p class="text-gray-500 text-sm">Réservations Actives</p>
            <p class="text-2xl font-bold text-gray-800">185</p>
          </div>
        </div>
      </div>
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
        <div class="bg-white p-6 rounded-xl shadow-md">
          <h2 class="text-xl font-semibold text-gray-700 mb-4">Évolution des inscriptions</h2>
          <div class="h-80">
            <canvas id="inscriptionsChart"></canvas>
          </div>
        </div>
        <div class="bg-white p-6 rounded-xl shadow-md">
          <h2 class="text-xl font-semibold text-gray-700 mb-4">Répartition des inscriptions</h2>
          <div class="h-80 flex items-center justify-center">
            <canvas id="registrationsChart"></canvas>
          </div>
        </div>
      </div>
      <div class="bg-white p-6 rounded-xl shadow-md mb-8">
        <div class="flex justify-between items-center mb-4">
          <h2 class="text-xl font-semibold text-gray-700">Nouvelles Inscriptions</h2>
          <a class="text-red-500 font-semibold hover:underline" href="pages/inscription.html">Voir tout</a>
        </div>
        <div class="flex justify-end items-center mb-4">
          <input id="searchInput" type="text" placeholder="Rechercher par nom, prénom, classe ou programme..." class="w-full md:w-1/3 border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-red-500" />
        </div>
        <div class="overflow-x-auto">
          <table class="w-full text-left">
            <thead>
              <tr class="border-b border-gray-200">
                <th class="py-3 px-4 font-semibold text-gray-600">Nom</th>
                <th class="py-3 px-4 font-semibold text-gray-600">Prénom</th>
                <th class="py-3 px-4 font-semibold text-gray-600">Date de naissance</th>
                <th class="py-3 px-4 font-semibold text-gray-600">Âge</th>
                <th class="py-3 px-4 font-semibold text-gray-600">Parent/Tuteur</th>
                <th class="py-3 px-4 font-semibold text-gray-600">Statut</th>
                <th class="py-3 px-4 font-semibold text-gray-600">Réservation</th>
              </tr>
            </thead>
            <tbody id="inscriptionsTableBody">
              <!-- Les inscriptions filtrées seront injectées ici par JS -->
            </tbody>
          </table>
        </div>
        <div id="inscriptionsPagination" class="flex justify-center mt-4"></div>
      </div>

    </main>

    <script>
      const inscriptionsCtx = document.getElementById('inscriptionsChart').getContext('2d');
      const inscriptionsChart = new Chart(inscriptionsCtx, {
        type: 'line',
        data: {
          labels: ['Jan', 'Fév', 'Mar', 'Avr', 'Mai', 'Juin', 'Juil'],
          datasets: [{
            label: 'Inscriptions',
            data: [5, 8, 12, 7, 10, 15, 9], // Données fictives ou dynamiques
            backgroundColor: 'rgba(34, 197, 94, 0.2)',
            borderColor: '#22C55E',
            borderWidth: 2,
            pointBackgroundColor: '#22C55E',
            pointBorderColor: '#fff',
            pointHoverBackgroundColor: '#fff',
            pointHoverBorderColor: '#22C55E',
            fill: true,
            tension: 0.4
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            y: {
              beginAtZero: true,
              grid: {
                color: '#E5E7EB'
              }
            },
            x: {
              grid: {
                display: false
              }
            }
          },
          plugins: {
            legend: {
              display: false
            }
          }
        }
      });
      const registrationsCtx = document.getElementById('registrationsChart').getContext('2d');
      const registrationsChart = new Chart(registrationsCtx, {
        type: 'doughnut',
        data: {
          labels: ['Inscription Complète', 'Abonnement Séance'],
          datasets: [{
            label: 'Répartition des inscriptions',
            data: [250, 70],
            backgroundColor: [
              '#EF4444',
              '#F97316'
            ],
            borderColor: '#FFFFFF',
            borderWidth: 4,
            hoverOffset: 8
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          cutout: '70%',
          plugins: {
            legend: {
              position: 'bottom',
              labels: {
                padding: 20,
                boxWidth: 12,
                font: {
                  size: 14
                }
              }
            }
          }
        }
      });

      // Liste des inscriptions (exemple statique, à remplacer par des données dynamiques si besoin)
      const inscriptions = [
        { nom: 'Dupont', prenom: 'Jean', dateNaissance: '15/03/2010', age: 14, parent: 'Marie Dupont', statut: 'Payé', reservation: '2024-02-15' },
        { nom: 'Martin', prenom: 'Sophie', dateNaissance: '22/07/2012', age: 12, parent: 'Pierre Martin', statut: 'Payé', reservation: '2024-03-20' },
        { nom: 'Bernard', prenom: 'Lucas', dateNaissance: '08/11/2008', age: 16, parent: 'Claire Bernard', statut: 'Non payé', reservation: '' },
        { nom: 'Moreau', prenom: 'Emma', dateNaissance: '12/05/2011', age: 13, parent: 'Thomas Moreau', statut: 'Payé', reservation: '2024-04-10' },
        { nom: 'Leroy', prenom: 'Alexandre', dateNaissance: '03/09/2009', age: 15, parent: 'Isabelle Leroy', statut: 'Payé', reservation: '2024-05-05' },
        { nom: 'Petit', prenom: 'Léa', dateNaissance: '25/12/2013', age: 10, parent: 'Nicolas Petit', statut: 'Non payé', reservation: '' },
        { nom: 'Durand', prenom: 'Paul', dateNaissance: '10/01/2011', age: 13, parent: 'Sophie Durand', statut: 'Payé', reservation: '2024-06-01' },
        { nom: 'Fabre', prenom: 'Julie', dateNaissance: '05/04/2012', age: 12, parent: 'Julien Fabre', statut: 'Non payé', reservation: '' },
      ];

      let searchValue = '';
      let currentPage = 1;
      const perPage = 5;

      function filterInscriptions() {
        if (!searchValue.trim()) return inscriptions;
        const val = searchValue.trim().toLowerCase();
        return inscriptions.filter(insc =>
          insc.nom.toLowerCase().includes(val) ||
          insc.prenom.toLowerCase().includes(val) ||
          (insc.parent && insc.parent.toLowerCase().includes(val)) ||
          (insc.statut && insc.statut.toLowerCase().includes(val)) ||
          (insc.reservation && insc.reservation.toLowerCase().includes(val))
        );
      }

      function renderInscriptionsTable(page = 1) {
        const tbody = document.getElementById('inscriptionsTableBody');
        tbody.innerHTML = '';
        const filtered = filterInscriptions();
        const start = (page - 1) * perPage;
        const end = start + perPage;
        filtered.slice(start, end).forEach(insc => {
          const tr = document.createElement('tr');
          tr.className = 'border-b border-gray-200 hover:bg-gray-50';
          tr.innerHTML = `
            <td class="py-3 px-4">${insc.nom}</td>
            <td class="py-3 px-4">${insc.prenom}</td>
            <td class="py-3 px-4">${insc.dateNaissance}</td>
            <td class="py-3 px-4">${insc.age}</td>
            <td class="py-3 px-4">${insc.parent}</td>
            <td class="py-3 px-4">${insc.statut}</td>
            <td class="py-3 px-4">${insc.reservation ? insc.reservation : '-'}</td>
          `;
          tbody.appendChild(tr);
        });
        renderPagination(filtered.length, page);
      }

      function renderPagination(total, page) {
        const paginationDiv = document.getElementById('inscriptionsPagination');
        paginationDiv.innerHTML = '';
        const totalPages = Math.ceil(total / perPage);
        if (totalPages <= 1) return;
        for (let i = 1; i <= totalPages; i++) {
          const btn = document.createElement('button');
          btn.textContent = i;
          btn.className = 'mx-1 px-3 py-1 rounded ' + (i === page ? 'bg-red-500 text-white' : 'bg-gray-200 text-gray-700');
          btn.onclick = () => {
            currentPage = i;
            renderInscriptionsTable(currentPage);
          };
          paginationDiv.appendChild(btn);
        }
      }

      document.getElementById('searchInput').addEventListener('input', function(e) {
        searchValue = e.target.value;
        currentPage = 1;
        renderInscriptionsTable(currentPage);
      });

      renderInscriptionsTable(currentPage);
    </script>
</body>

</html>